<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contenido - El Cuaderno de √Åfrica</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Mouse+Memoirs&display=swap');
    </style>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="assets/img/pencil.png" type="image/x-icon">
    <style>
        .content-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            margin: 2rem auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: #FF6B6B;
            text-align: center;
            margin-bottom: 2rem;
        }

        .exercise-card {
            background: #f9f9f9;
            border-left: 5px solid #4ECDC4;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 10px;
        }

        .summary-card {
            background: #fff8f0;
            border-left: 5px solid #FF6B6B;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 10px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .btn-option {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #ccc;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-family: var(--font-main);
            font-size: 1rem;
            text-align: left;
            transition: all 0.3s;
        }

        .btn-option:hover {
            background: #f0f0f0;
            border-color: #aaa;
        }

        .btn-option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .btn-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        /* Tabs para cambiar entre resumen y ejercicios si se desea, aunque por ahora viene predefinido por URL */
    </style>
</head>

<body>

    <header>
        <div id="date-display" class="header-info date"></div>
        <h1 style="cursor: pointer;" onclick="goBack()">Tema 4 üåü</h1>
        <div id="time-display" class="header-info time"></div>
    </header>

    <main>
        <div class="content-container">
            <h2 id="content-mode-title" class="section-title">Cargando...</h2>

            <div id="content-area">
                <!-- El contenido se inyectar√° aqu√≠ din√°micamente -->
                <p style="text-align: center; color: #888;">Selecciona una actividad para empezar.</p>
            </div>

            <div style="margin-top: 2rem; text-align: center;">
                <button onclick="goBack()" style="
                    border: none;
                    cursor: pointer;
                    display: inline-block;
                    padding: 1rem 2rem;
                    background: #FF6B6B;
                    color: white;
                    text-decoration: none;
                    font-family: var(--font-display);
                    font-size: 1.5rem;
                    border-radius: 50px;
                    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                    ‚¨ÖÔ∏è Volver
                </button>
            </div>
        </div>
    </main>

    <footer>
        <p>Hecho con ‚ù§Ô∏è para la mejor estudiante</p>
    </footer>

    <script src="assets/js/clock.js"></script>
    <script>
        function goBack() {
            const params = new URLSearchParams(window.location.search);
            const type = params.get('type') || 'ejercicios';
            const asignatura = params.get('asignatura') || 'castellano';
            window.location.href = `temas.html?asignatura=${asignatura}&type=${type}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const type = params.get('type');
            const modeTitle = document.getElementById('content-mode-title');
            const contentArea = document.getElementById('content-area');

            if (type === 'ejercicios') {
                const subseccion = params.get('subseccion');

                if (!subseccion) {
                    // MODO MEN√ö: Seleccionar qu√© parte del tema practicar
                    modeTitle.textContent = "Elige una secci√≥n ü¶Ñ";
                    document.title = "Selecci√≥n - Tema 4";

                    contentArea.innerHTML = `
                        <div class="menu-container" style="flex-direction: column; align-items: stretch; gap: 1rem;">
                            
                            <!-- 1. Comprendo el cuento -->
                            <a href="contenido.html?asignatura=${params.get('asignatura')}&tema=4&type=ejercicios&subseccion=comprendo" class="card-btn" style="width: 100%; height: auto; flex-direction: row; justify-content: start; padding: 1.5rem; background: #FFB7B2;">
                                <img src="assets/img/notebook.png" alt="Cuento" style="width: 60px; height: 60px; margin: 0 1rem 0 0;">
                                <div style="text-align: left;">
                                    <h3 style="margin: 0; font-size: 1.5rem; color: white;">1. Comprendo el cuento</h3>
                                    <span style="font-size: 1rem; color: white;">El reloj de Mica</span>
                                </div>
                            </a>

                            <!-- Placeholder para otras secciones -->
                            <div class="card-btn" style="opacity: 0.6; width: 100%; height: auto; flex-direction: row; justify-content: start; padding: 1.5rem; background: #ddd; cursor: not-allowed;">
                                <span style="font-size: 1.5rem; color: #888;">2. Entiendo la lengua (Pr√≥ximamente)</span>
                            </div>
                             <div class="card-btn" style="opacity: 0.6; width: 100%; height: auto; flex-direction: row; justify-content: start; padding: 1.5rem; background: #ddd; cursor: not-allowed;">
                                <span style="font-size: 1.5rem; color: #888;">3. Escribo bien (Pr√≥ximamente)</span>
                            </div>
                        </div>
                    `;
                } else if (subseccion === 'comprendo') {
                    // MODO EJERCICIOS: Comprendo el cuento
                    modeTitle.textContent = "Comprendo el cuento üìñ";
                    document.title = "Comprendo el cuento - Tema 4";

                    contentArea.innerHTML = `
                        <div id="exercise-list">
                            <div class="exercise-card">
                                <h3>1. ¬øDe qui√©n habla el comienzo del cuento?</h3>
                                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                     <button class="btn-option" onclick="selectOption(this, false)">Arabela (Hada)</button>
                                     <button class="btn-option" onclick="selectOption(this, false)">Topi (Ni√±o)</button>
                                     <button class="btn-option" onclick="selectOption(this, true)">Mica (Troll)</button>
                                </div>
                            </div>

                            <div class="exercise-card">
                                <h3>2. Marca si es verdadero (V) o falso (F)</h3>
                                <div class="true-false-item">
                                    <p>Mica vigila un nido de gorriones.</p>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, false)">Verdadero</button>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, true)">Falso</button>
                                </div>
                                <div class="true-false-item" style="margin-top: 1rem;">
                                    <p>Arabela arregla el reloj cuando se rompe.</p>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, true)">Verdadero</button>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, false)">Falso</button>
                                </div>
                                <div class="true-false-item" style="margin-top: 1rem;">
                                    <p>El reloj tiene dibujos de un sol y una luna.</p>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, true)">Verdadero</button>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, false)">Falso</button>
                                </div>
                                <div class="true-false-item" style="margin-top: 1rem;">
                                    <p>Monteoscuro se queda de noche para siempre.</p>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, false)">Verdadero</button>
                                    <button class="btn-option" style="display:inline-block; width:45%;" onclick="selectOption(this, true)">Falso</button>
                                </div>
                            </div>

                            <div class="exercise-card">
                                <h3>3. ¬øC√≥mo se llama el reloj que encuentra Mica?</h3>
                                <button class="btn-option" onclick="selectOption(this, false)">Reloj de cuco</button>
                                <button class="btn-option" onclick="selectOption(this, true)">Reloj universal</button>
                                <button class="btn-option" onclick="selectOption(this, false)">Reloj de arena</button>
                            </div>

                            <div class="exercise-card">
                                <h3>4. ¬øC√≥mo funciona el reloj?</h3>
                                <button class="btn-option" onclick="selectOption(this, false)">Hay que enchufarlo</button>
                                <button class="btn-option" onclick="selectOption(this, false)">Hay que ponerle pilas</button>
                                <button class="btn-option" onclick="selectOption(this, true)">Hay que darle cuerda</button>
                            </div>

                            <div class="exercise-card">
                                <h3>5. ‚ù§Ô∏è ¬øC√≥mo te sentir√≠as t√∫?</h3>
                                <p>Mica se asusta cuando piensa que va a ser siempre de noche. ¬øC√≥mo te sentir√≠as t√∫ si te pasara a ti?</p>
                                <textarea style="width: 100%; height: 80px; padding: 10px; border-radius: 10px; border: 2px solid #ccc; font-family: var(--font-main);" placeholder="Yo me sentir√≠a..."></textarea>
                            </div>

                            <div class="exercise-card">
                                <h3>6. üëÄ Con ojos curiosos</h3>
                                <p>Imaginad que est√°is en el patio y de repente es <strong>verano</strong>. Escribe qu√© pasar√≠a:</p>
                                <!-- (Inputs simplificados para demo) -->
                                <textarea style="width: 100%; height: 80px; padding: 10px; border-radius: 10px; border: 2px solid #ccc; font-family: var(--font-main);" placeholder="Ver√≠a..., oir√≠a..."></textarea>
                            </div>

                            <div class="exercise-card">
                                <h3>7. üï∞Ô∏è Une cada esfera con lo que cambia</h3>
                                <div style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                                    <p><strong>1. Esfera con Sol y Luna</strong></p>
                                    <button class="btn-option" onclick="selectOption(this, false)">Cambia las estaciones</button>
                                    <button class="btn-option" onclick="selectOption(this, true)">Cambia el d√≠a y la noche</button>
                                </div>
                                <div>
                                    <p><strong>2. Esfera con N√∫meros</strong></p>
                                    <button class="btn-option" onclick="selectOption(this, false)">Cambia las estaciones</button>
                                    <button class="btn-option" onclick="selectOption(this, true)">Da la hora</button>
                                </div>
                            </div>

                            <div class="exercise-card">
                                <h3>8. üé® Inventa y Crea</h3>
                                <p>Inventa una <strong>nueva esfera</strong>.</p>
                                <textarea style="width: 100%; height: 80px; padding: 10px; border-radius: 10px; border: 2px solid #ccc; font-family: var(--font-main);" placeholder="Anotaciones..."></textarea>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; text-align: center;">
                            <button onclick="calculateScore()" style="
                                background: #4ECDC4; color: white; border: none; padding: 1rem 3rem; font-size: 1.5rem; 
                                border-radius: 50px; font-family: var(--font-display); cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                            ">¬° He terminado ! ‚úÖ</button>
                            <div id="score-result" style="display:none; margin-top: 1rem; font-size: 1.5rem; font-weight: bold; color: #FF6B6B;"></div>
                        </div>
                    `;
                }

            } else {
                modeTitle.textContent = "Resumen del Tema 4 üìö";
                document.title = "Resumen Tema 4";

                contentArea.innerHTML = `
                    <div class="summary-card">
                        <h3>ü¶Ñ ¬øDe qu√© va la historia?</h3>
                        <p><strong>Mica</strong> (la protagonista) y sus amigos encuentran un objeto muy misterioso escondido en el colegio: <strong>¬°Un Reloj Universal!</strong> üï∞Ô∏è‚ú®</p>
                    </div>
                    
                    <div class="summary-card">
                        <h3>üîç ¬øQu√© tiene de especial este reloj?</h3>
                        <p>No es un reloj normal. En lugar de una sola cara, tiene <strong>tres esferas</strong> diferentes:</p>
                        <ul>
                            <li>üî¢ <strong>La de los n√∫meros:</strong> Marca la hora, como los relojes normales.</li>
                            <li>‚òÄÔ∏èüåô <strong>La del Sol y la Luna:</strong> Sirve para cambiar entre el <strong>d√≠a y la noche</strong>.</li>
                            <li>‚ùÑÔ∏èüåª <strong>La de los dibujos (nieve, flores...):</strong> Sirve para cambiar las <strong>estaciones</strong> (Invierno, Primavera, Verano, Oto√±o).</li>
                        </ul>
                    </div>

                    <div class="summary-card">
                        <h3>‚ö†Ô∏è ¬°El problema!</h3>
                        <p>Mica empieza a jugar con las agujas y, sin querer, hace que se haga de noche... <strong>¬°y rompe la aguja!</strong> üò±</p>
                        <p>Todos se asustan porque piensan que se quedar√°n a oscuras para siempre. Pero por suerte, <strong>Arabela</strong> (el hada) sabe arreglarlo.</p>
                    </div>
                    
                    <div class="summary-card">
                        <h3>üí° Lo que aprendemos</h3>
                        <p>Con esta historia practicamos la <strong>lectura</strong> y entendemos mejor c√≥mo funciona el paso del tiempo: las horas, los d√≠as y las estaciones.</p>
                        <p><em>¬°Recuerda leer despacito y fijarte bien en los detalles para responder a las preguntas!</em> üòâ</p>
                    </div>
                `;
            }

            updateClock();
            setInterval(updateClock, 1000);
        });

        // L√≥gica de Selecci√≥n (sin mostrar resultado inmediato)
        function selectOption(btn, isCorrect) {
            // Reset siblings
            const parent = btn.parentElement;
            const siblings = parent.querySelectorAll('.btn-option');
            siblings.forEach(sib => {
                sib.classList.remove('selected');
                sib.style.background = 'white';
                sib.style.color = 'var(--color-texto)';
            });

            // Mark selected
            btn.classList.add('selected');
            btn.style.background = '#C7CEEA'; // Color selecci√≥n

            // Store correctness data tag
            btn.dataset.correct = isCorrect;
        }

        function calculateScore() {
            const selectedOptions = document.querySelectorAll('.btn-option.selected');
            let correctCount = 0;
            let totalQuestions = 0;

            // Contamos "preguntas" como grupos de botones, una aproximaci√≥n simple
            // Mejor: contar aciertos expl√≠citos vs errores

            selectedOptions.forEach(btn => {
                if (btn.dataset.correct === 'true') {
                    btn.style.background = '#d4edda';
                    btn.style.borderColor = '#28a745';
                    correctCount++;
                } else {
                    btn.style.background = '#f8d7da';
                    btn.style.borderColor = '#dc3545';
                }
            });

            // Mostrar resultado
            const resultDiv = document.getElementById('score-result');
            resultDiv.style.display = 'block';

            if (correctCount > 0) {
                resultDiv.textContent = `¬°Has acertado ${correctCount} preguntas! üéâ`;
                // Efecto confeti si pudi√©ramos
            } else {
                resultDiv.textContent = `¬°Sigue intent√°ndolo! T√∫ puedes üí™`;
            }

            window.scrollTo(0, document.body.scrollHeight);
        }
    </script>
</body>

</html>